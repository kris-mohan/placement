<mat-card>
  <mat-card-header class="custom-card-header">
    <div class="example-button-row">
      <div class="example-flex-container">
        <div class="button-label-container">
          <div class="example-button-container">
            <mat-icon (click)="goBack()">keyboard_backspace</mat-icon>
          </div>
          <div class="header-mat-label">
            <mat-label>Job Postings</mat-label>
          </div>
        </div>

        <div>
          <mat-form-field class="example-full-width" appearance="outline">
            <mat-label>Search Job Title, Company</mat-label>
            <input
              type="text"
              aria-label="Number"
              matInput
              [matAutocomplete]="auto"
            />
            <mat-autocomplete
              autoActiveFirstOption
              #auto="matAutocomplete"
              (optionSelected)="onCompanySelected($event)"
            >
              <mat-option
                *ngFor="let company of filteredCompany | async"
                [value]="company.Name"
              >
                {{ company.Name }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Location</mat-label>
            <mat-select
              [formControl]="CityControl"
              multiple
              (openedChange)="onCityDropdownOpen()"
              panelClass="custom-dropdown-panel"
            >
              <mat-select-trigger>
                {{ selectedCompanyCities }}
              </mat-select-trigger>
              <mat-form-field appearance="outline">
                <input
                  class="full-width"
                  matInput
                  [(ngModel)]="searchCity"
                  (ngModelChange)="filterCities($event)"
                  placeholder="Search"
                />
              </mat-form-field>
              <mat-option *ngIf="!filteredCompanies.length" disabled
                >No options</mat-option
              >
              <mat-option
                *ngFor="let company of filteredCompanies"
                [value]="company.City"
              >
                {{ company.City }}
              </mat-option>
              <mat-dialog-actions class="mat-dialog-actions">
                <button
                  mat-button
                  mat-dialog-close
                  (click)="resetLocationSelection()"
                >
                  Reset
                </button>
                <button
                  mat-raised-button
                  class="matbutton"
                  (click)="showLocationResults()"
                >
                  <p class="matName">Show results</p>
                </button>
              </mat-dialog-actions>
            </mat-select>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field class="example-full-width" appearance="outline">
            <mat-label>Select Date Range</mat-label>
            <mat-date-range-input
              [formGroup]="campaignOne"
              [rangePicker]="campaignOnePicker"
              [comparisonStart]="campaignOne.value.start"
              [comparisonEnd]="campaignOne.value.end"
            >
              <input
                matStartDate
                placeholder="Start date"
                formControlName="start"
              />
              <input matEndDate placeholder="End date" formControlName="end" />
            </mat-date-range-input>
            <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle
              matIconSuffix
              [for]="campaignOnePicker"
            ></mat-datepicker-toggle>
            <mat-date-range-picker #campaignOnePicker></mat-date-range-picker>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field appearance="outline">
            <mat-label>Experience Level</mat-label>
            <mat-select [formControl]="experienceLevelControl" multiple>
              @for (expLevel of experienceLevel; track expLevel) {
              <mat-option [value]="expLevel">{{ expLevel }}</mat-option>
              }
            </mat-select>
          </mat-form-field>
        </div>

        <div>
          <button mat-fab extended class="matbutton-download">
            <mat-icon>file_download</mat-icon>Excel
          </button>
          <button mat-fab extended class="matbutton-download">
            <mat-icon>picture_as_pdf</mat-icon>
            <h5>PDF</h5>
          </button>
        </div>
        <!-- <div class="example-button-container">
          <button
            *ngIf="UserRoleId !== 3"
            mat-raised-button
            class="matbutton"
            (click)="openAddEditCompanyForm(0)"
          >
            <mat-icon class="maticon">add</mat-icon>
            <p class="matButtonText">Add Job Postings</p>
          </button>
        </div> -->
      </div>
    </div>
    <div class="heading" style="display: flex; justify-content: space-between">
      <div>
        <h2>{{ JobPostingsDescriptionData()?.Name }}</h2>
      </div>
      <div class="example-button-container filter_items">
        <button
          mat-raised-button
          class="matbutton"
          (click)="openStudentJobAdditionalFiltersModal()"
        >
          <p class="matName">Additional Filters</p>
        </button>
        <button
          *ngIf="UserRoleId !== 3"
          mat-raised-button
          class="matbutton"
          (click)="openAddEditCompanyForm(0)"
        >
          <mat-icon class="maticon">add</mat-icon>
          <p class="matButtonText">Add Job Postings</p>
        </button>
      </div>
    </div>
  </mat-card-header>
  <div>
    <!-- <div> -->
    <mat-card-content
      fxLayout="row wrap"
      fxLayoutAlign="start stretch"
      class="mat-card-content"
    >
      <div
        *ngFor="let company of jobPostingsData()"
        (click)="openCopmanyJobDescriptionPage(company.Id)"
        fxFlex="100%"
        fxFlex.gt-sm="100%"
        fxFlex.gt-md="45%"
        fxFlex.gt-lg="30%"
        class="mat-grid-tile"
      >
        <div class="company-details">
          <div class="company-designation">
            <h2 class="heading1">{{ company.JobRole }}</h2>
          </div>
          <div class="job-details-container">
            <div class="job-detail">
              <span><strong>Experience:</strong> {{ company.Experience }}</span>
              <span><strong>Job Type:</strong> {{ company.JobType }}</span>
              <span><strong>Skills:</strong> </span>
              <span><strong>Salary:</strong> {{ company.Salary }}</span>
              <span><strong>Location:</strong> {{ company.Location }}</span>
              <span
                ><strong>No. of vacancies:</strong>
                {{ company.Vacancies }}</span
              >

              <!-- <span><strong>Number of applicants submitted:</strong> 10</span> -->
            </div>
            <div class="job-detail">
              <span><strong>Shift:</strong> {{ company.Shift }}</span>
              <span
                ><strong>Mode of Work:</strong> {{ company.ModeOfWork }}</span
              >
              <span><strong> Drive Date:</strong> {{ company.DriveDate }}</span>
              <span><strong>Posted Date:</strong> {{ company.ValidFrom }}</span>
              <span
                ><strong>Application last date:</strong
                >{{ company.ValidTill }}</span
              >
              <!-- <span><strong>Number of interview schedule:</strong> 10</span> -->
            </div>
          </div>
        </div>
      </div>
    </mat-card-content>
    <!-- </div> -->

    <div class="right-content">
      <div class="related-jobs">
        <h3>{{ JobPostingsDescriptionData()?.Name }}</h3>
        <img
          src="{{ JobPostingsDescriptionData()?.LogoPath }}"
          alt="image"
          class="image"
        />
        <ul>
          <li>
            <h4>About the company</h4>
            <p>
              {{ JobPostingsDescriptionData()?.About }}
            </p>
          </li>
          <li>
            <p>
              Headquarters: {{ JobPostingsDescriptionData()?.HeadQuarters }}
            </p>
            <p>
              Customer service:
              {{ JobPostingsDescriptionData()?.PhoneNumber }}
            </p>
            <p>
              Number of employees:
              {{ JobPostingsDescriptionData()?.CompanySize }}
            </p>
            <!-- <p>CEO: Julie Sweet (1 Sept 2019–)</p>
            <p>Founded: 1989, Hamilton, Bermuda</p>
            <p>CFO: KC McClure</p> -->
            <!-- <span>Paytm | 3.3 | 6720 reviews</span>
          <span>Noida, Bengaluru | Posted 22 days ago</span> -->
          </li>
          <!-- <li>
          <h4>Backend Software Engineer - Paytm Money</h4>
          <span>Paytm | 3.3 | 6720 reviews</span>
          <span>Noida, Bengaluru | Posted 22 days ago</span>
        </li> -->
        </ul>

        <div class="resources">
          <h2>Uploaded Resources</h2>
          <div class="resources-container">
            <div class="video-column">
              <h4>Video:</h4>
              <iframe
                width="120%"
                height="200"
                src="https://www.youtube.com/embed/dQw4w9WgXcQ"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen
              ></iframe>
            </div>

            <div class="resources-column">
              <div>
                <h4>PPT:</h4>
                <a
                  href="../../../../assets/PaataashalaBrochure.pdf"
                  target="_blank"
                  class="resource-link"
                >
                  <mat-icon>picture_as_pdf</mat-icon> View PPT
                </a>
              </div>
              <div>
                <h4>Document:</h4>
                <a
                  href="../../../../assets/PaataashalaBrochure.pdf"
                  target="_blank"
                  class="resource-link"
                >
                  <mat-icon>description</mat-icon> View Document
                </a>
              </div>
              <div>
                <h4>Audio:</h4>
                <a
                  href="assets/sample-audio.mp3"
                  target="_blank"
                  class="resource-link"
                >
                  <mat-icon>volume_up</mat-icon> Listen to Audio
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</mat-card>
